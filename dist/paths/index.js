"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var d=require("path");function g(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var u=g(d);const P=/^\.{1,2}\//,m=/\*/g,f=(t,n)=>{const e=t.match(m);if(e&&e.length>1)throw new Error(n)};function v(t){if(t.includes("*")){const[n,e]=t.split("*");return{prefix:n,suffix:e}}return t}const x=({prefix:t,suffix:n},e)=>e.startsWith(t)&&e.endsWith(n);function y(t,n,e){return Object.entries(t).map(([a,h])=>(f(a,`Pattern '${a}' can have at most one '*' character.`),{pattern:v(a),substitutions:h.map(s=>{if(f(s,`Substitution '${s}' in pattern '${a}' can have at most one '*' character.`),!s.startsWith("./")&&!n)throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return u.default.join(e,s)})}))}function b(t){var n;if(!((n=t.config.compilerOptions)!=null&&n.paths))return null;const{baseUrl:e,paths:a}=t.config.compilerOptions,h=u.default.resolve(u.default.dirname(t.path),e||"."),s=y(a,e,h);return function(o){if(P.test(o))return[];const c=[];for(const r of s){if(r.pattern===o)return r.substitutions;typeof r.pattern!="string"&&c.push(r)}let i,l=-1;for(const r of c)x(r.pattern,o)&&r.pattern.prefix.length>l&&(l=r.pattern.prefix.length,i=r);if(!i)return[];const p=o.slice(i.pattern.prefix.length,o.length-i.pattern.suffix.length);return i.substitutions.map(r=>r.replace("*",p))}}exports.createPathsMatcher=b;
